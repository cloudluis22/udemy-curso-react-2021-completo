{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Jos\\xE9 Luis/Desktop/React/09-calendar-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Users/Jos\\xE9 Luis/Desktop/React/09-calendar-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/Jos\\xE9 Luis/Desktop/React/09-calendar-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED}from\"react-dom\";import Swal from\"sweetalert2\";import{convertEvents}from\"../helpers/convertEvents\";import{fetchToken}from\"../helpers/fetch\";import{types}from\"../types/types\";export var eventStartAddNew=function eventStartAddNew(event){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var _getState$auth,uid,name,dbEvent,response,body;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_getState$auth=getState().auth,uid=_getState$auth.uid,name=_getState$auth.name;_context.prev=1;dbEvent=_objectSpread(_objectSpread({},event),{},{start:event.startDate,end:event.endDate});_context.next=5;return fetchToken('events',dbEvent,'POST');case 5:response=_context.sent;_context.next=8;return response.json();case 8:body=_context.sent;if(body.ok){event.id=body.event.id;event.user={_id:uid,name:name};console.log(event);dispatch(eventAddNew(event));}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};export var eventStartLoading=function eventStartLoading(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var response,body,events;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetchToken('events');case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:body=_context2.sent;events=convertEvents(body.events);dispatch(eventsLoaded(events));_context2.next=13;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,11]]);}));return function(_x3){return _ref2.apply(this,arguments);};}();};export var eventStartUpdate=function eventStartUpdate(event){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var response,body;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetchToken(\"events/\".concat(event.id),event,'DELETE');case 3:response=_context3.sent;_context3.next=6;return response.json();case 6:body=_context3.sent;if(body.ok){dispatch(eventUpdated(event));}else{Swal.fire('Error',body.msg,'error');}_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 13:;case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[0,10]]);}));return function(_x4){return _ref3.apply(this,arguments);};}();};export var eventStartDelete=function eventStartDelete(){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var id,response,body;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;id=getState().calendar.activeEvent.id;_context4.next=4;return fetchToken(\"events/\".concat(id),{},'delete');case 4:response=_context4.sent;_context4.next=7;return response.json();case 7:body=_context4.sent;if(body.ok){dispatch(eventDeleted());}else{Swal.fire('Error',body.msg,'error');}_context4.next=14;break;case 11:_context4.prev=11;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 14:;case 15:case\"end\":return _context4.stop();}}},_callee4,null,[[0,11]]);}));return function(_x5,_x6){return _ref4.apply(this,arguments);};}();};export var eventLogoutCleaning=function eventLogoutCleaning(){return{type:types.eventLogoutCleaning};};var eventAddNew=function eventAddNew(event){return{type:types.eventAddNew,payload:event};};export var eventSetActive=function eventSetActive(event){return{type:types.eventSetActive,payload:event};};export var eventClearActive=function eventClearActive(){return{type:types.eventClearActive};};var eventUpdated=function eventUpdated(event){return{type:types.eventUpdated,payload:event};};var eventDeleted=function eventDeleted(){return{type:types.eventDeleted};};var eventsLoaded=function eventsLoaded(events){return{type:types.eventsLoaded,payload:events};};","map":{"version":3,"sources":["C:/Users/JosÃ© Luis/Desktop/React/09-calendar-app/src/actions/events.js"],"names":["__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","Swal","convertEvents","fetchToken","types","eventStartAddNew","event","dispatch","getState","auth","uid","name","dbEvent","start","startDate","end","endDate","response","json","body","ok","id","user","_id","console","log","eventAddNew","eventStartLoading","events","eventsLoaded","eventStartUpdate","eventUpdated","fire","msg","eventStartDelete","calendar","activeEvent","eventDeleted","eventLogoutCleaning","type","payload","eventSetActive","eventClearActive"],"mappings":"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","sourcesContent":["import { __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED } from \"react-dom\";\r\nimport Swal from \"sweetalert2\";\r\nimport { convertEvents } from \"../helpers/convertEvents\";\r\nimport { fetchToken } from \"../helpers/fetch\";\r\nimport { types } from \"../types/types\";\r\n\r\nexport const eventStartAddNew = (event) => {\r\n    return async ( dispatch, getState ) => {\r\n\r\n        const { uid, name } = getState().auth;\r\n\r\n        try {\r\n            const dbEvent = {\r\n                ...event,\r\n                start: event.startDate,\r\n                end: event.endDate\r\n            }\r\n\r\n            const response = await fetchToken('events', dbEvent, 'POST');\r\n            const body = await response.json();\r\n\r\n            if (body.ok) {\r\n                event.id = body.event.id\r\n                event.user = {\r\n                    _id: uid,\r\n                    name: name\r\n                }\r\n                console.log(event);\r\n                dispatch( eventAddNew(event) );\r\n            }\r\n\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n\r\n    };\r\n};\r\n\r\nexport const eventStartLoading = () => {\r\n    return async (dispatch) => {\r\n\r\n        try {\r\n            const response = await fetchToken('events');\r\n            const body = await response.json();\r\n\r\n            const events = convertEvents(body.events);\r\n           dispatch( eventsLoaded( events ) );\r\n\r\n        } catch (error) {\r\n\r\n        }\r\n\r\n    };\r\n};\r\n\r\nexport const eventStartUpdate = (event) => {\r\n    return async (dispatch) => {\r\n\r\n        try {\r\n\r\n            const response = await fetchToken(`events/${event.id}`, event, 'DELETE');\r\n            const body = await response.json();\r\n\r\n            if (body.ok) {\r\n                dispatch( eventUpdated(event) );\r\n            }\r\n            else {\r\n                Swal.fire('Error', body.msg, 'error');\r\n            }\r\n\r\n        } catch (error) {\r\n            console.log(error);\r\n        };\r\n\r\n    };\r\n};\r\n\r\nexport const eventStartDelete = () => {\r\n\r\n\r\n    return async (dispatch, getState) => {\r\n        try {\r\n\r\n            const { id } = getState().calendar.activeEvent;\r\n\r\n            const response = await fetchToken(`events/${id}`, {}, 'delete');\r\n            const body = await response.json();\r\n\r\n            if (body.ok) {\r\n                dispatch( eventDeleted() );\r\n            }\r\n            else {\r\n                Swal.fire('Error', body.msg, 'error');\r\n            }\r\n\r\n        } catch (error) {\r\n            console.log(error);\r\n        };\r\n\r\n    };\r\n}\r\n\r\nexport const eventLogoutCleaning = () => ({ type: types.eventLogoutCleaning });\r\n\r\nconst eventAddNew = (event) => ({\r\n    type: types.eventAddNew,\r\n    payload: event\r\n});\r\n\r\nexport const eventSetActive = (event) => ({\r\n    type: types.eventSetActive,\r\n    payload: event\r\n});\r\n\r\nexport const eventClearActive = () => ({\r\n    type: types.eventClearActive\r\n});\r\n\r\nconst eventUpdated = ( event ) => ({\r\n    type: types.eventUpdated,\r\n    payload: event\r\n});\r\n\r\nconst eventDeleted = () => ({\r\n    type: types.eventDeleted\r\n});\r\n\r\nconst eventsLoaded = (events) => ({ type: types.eventsLoaded, payload: events });"]},"metadata":{},"sourceType":"module"}