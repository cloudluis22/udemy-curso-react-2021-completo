{"ast":null,"code":"import Swal from \"sweetalert2\";\nimport { fetchNoToken, fetchToken } from \"../helpers/fetch\";\nimport { types } from \"../types/types\";\nexport const startLogin = (email, password) => {\n  return async dispatch => {\n    const response = await fetchNoToken('auth', {\n      email,\n      password\n    }, 'POST');\n    const body = await response.json();\n\n    if (body.ok) {\n      localStorage.setItem('token', body.token);\n      localStorage.setItem('token-init-date', new Date().getTime());\n      dispatch(login({\n        uid: body.uid,\n        name: body.name\n      }));\n    } else {\n      Swal.fire('Error', body.msg, 'error');\n    }\n  };\n};\nexport const startRegister = (email, password, name) => {\n  return async dispatch => {\n    const response = await fetchNoToken('auth/new', {\n      email,\n      password,\n      name\n    }, 'POST');\n    const body = await response.json();\n\n    if (body.ok) {\n      localStorage.setItem('token', body.token);\n      localStorage.setItem('token-init-date', new Date().getTime());\n      dispatch(login({\n        uid: body.uid,\n        name: body.name\n      }));\n    } else {\n      Swal.fire('Error', body.msg, 'error');\n    }\n\n    ;\n  };\n};\nexport const startChecking = () => {\n  return async dispatch => {\n    const response = await fetchToken('auth/renew');\n    const body = await response.json();\n\n    if (body.ok) {\n      localStorage.setItem('token', body.token);\n      localStorage.setItem('token-init-date', new Date().getTime());\n      dispatch(login({\n        uid: body.uid,\n        name: body.name\n      }));\n    } else {\n      Swal.fire('Error', body.msg, 'error');\n    }\n\n    ;\n  };\n};\n\nconst checkingFinish = () => ({\n  type: types.checkingFinish\n});\n\nconst login = user => ({\n  type: types.authLogin,\n  payload: user\n});","map":{"version":3,"sources":["C:/Users/JosÃ© Luis/Desktop/React/09-calendar-app/src/actions/auth.js"],"names":["Swal","fetchNoToken","fetchToken","types","startLogin","email","password","dispatch","response","body","json","ok","localStorage","setItem","token","Date","getTime","login","uid","name","fire","msg","startRegister","startChecking","checkingFinish","type","user","authLogin","payload"],"mappings":"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","sourcesContent":["import Swal from \"sweetalert2\";\r\n\r\nimport { fetchNoToken, fetchToken } from \"../helpers/fetch\";\r\nimport { types } from \"../types/types\";\r\n\r\nexport const startLogin = (email, password) => {\r\n\r\n    return async (dispatch) => {\r\n\r\n        const response = await fetchNoToken('auth', { email, password }, 'POST');\r\n        const body = await response.json();\r\n\r\n        if (body.ok) {\r\n\r\n            localStorage.setItem( 'token', body.token );\r\n            localStorage.setItem( 'token-init-date', new Date().getTime() );\r\n\r\n            dispatch(login({\r\n                uid: body.uid,\r\n                name: body.name\r\n            }));\r\n\r\n        } else {\r\n            Swal.fire('Error', body.msg, 'error');\r\n        }\r\n    };\r\n};\r\n\r\nexport const startRegister = (email, password, name) => {\r\n    return async (dispatch) => {\r\n\r\n        const response = await fetchNoToken('auth/new', { email, password, name }, 'POST');\r\n        const body = await response.json();\r\n\r\n        if (body.ok) {\r\n\r\n            localStorage.setItem( 'token', body.token );\r\n            localStorage.setItem( 'token-init-date', new Date().getTime() );\r\n\r\n            dispatch(login({\r\n                uid: body.uid,\r\n                name: body.name\r\n            }));\r\n\r\n        } else {\r\n            Swal.fire('Error', body.msg, 'error');\r\n        };\r\n    };\r\n};\r\n\r\nexport const startChecking = () => {\r\n\r\n    return async (dispatch) => {\r\n        const response = await fetchToken('auth/renew');\r\n        const body = await response.json();\r\n\r\n        if (body.ok) {\r\n\r\n            localStorage.setItem( 'token', body.token );\r\n            localStorage.setItem( 'token-init-date', new Date().getTime() );\r\n\r\n            dispatch(login({\r\n                uid: body.uid,\r\n                name: body.name\r\n            }));\r\n\r\n        } else {\r\n            Swal.fire('Error', body.msg, 'error');\r\n        };\r\n    }\r\n\r\n}\r\n\r\nconst checkingFinish = () => ({ type: types.checkingFinish });\r\n\r\nconst login = (user) => ({\r\n    type: types.authLogin,\r\n    payload: user\r\n});"]},"metadata":{},"sourceType":"module"}