{"ast":null,"code":"import _defineProperty from\"C:/Users/Jos\\xE9 Luis/Desktop/React/09-calendar-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/Jos\\xE9 Luis/Desktop/React/09-calendar-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/Jos\\xE9 Luis/Desktop/React/09-calendar-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import moment from'moment';import Swal from'sweetalert2';import Modal from'react-modal';import DateTimePicker from'react-datetime-picker';import{uiCloseModal}from'../../actions/ui';import{eventStartAddNew,eventClearActive,eventStartUpdate}from'../../actions/events';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var customStyles={content:{top:'50%',left:'50%',right:'auto',bottom:'auto',marginRight:'-50%',transform:'translate(-50%, -50%)'}};Modal.setAppElement('#root');var now=moment().minutes(0).seconds(0).add(1,'hours');var end=moment(now).clone().add(1,'hours');var initEvent={title:'',notes:'',startDate:now.toDate(),endDate:end.toDate()};export var CalendarModal=function CalendarModal(){var _useSelector=useSelector(function(state){return state.ui;}),modalOpen=_useSelector.modalOpen;var _useSelector2=useSelector(function(state){return state.calendar;}),activeEvent=_useSelector2.activeEvent;var dispatch=useDispatch();var _useState=useState(initEvent),_useState2=_slicedToArray(_useState,2),formValues=_useState2[0],setFormValues=_useState2[1];var notes=formValues.notes,title=formValues.title,startDate=formValues.startDate,endDate=formValues.endDate;useEffect(function(){if(activeEvent){setFormValues(activeEvent);}else{setFormValues(initEvent);};},[activeEvent,setFormValues]);var handleInputChange=function handleInputChange(_ref){var target=_ref.target;setFormValues(_objectSpread(_objectSpread({},formValues),{},_defineProperty({},target.name,target.value)));};var _useState3=useState(now.toDate()),_useState4=_slicedToArray(_useState3,2),dateStart=_useState4[0],setDateStart=_useState4[1];var _useState5=useState(end.toDate()),_useState6=_slicedToArray(_useState5,2),dateEnd=_useState6[0],setDateEnd=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),titleValid=_useState8[0],setTitleValid=_useState8[1];var closeModal=function closeModal(){dispatch(uiCloseModal());dispatch(eventClearActive());setFormValues(initEvent);};var handleStartDateChange=function handleStartDateChange(evt){setDateStart(evt);setFormValues(_objectSpread(_objectSpread({},formValues),{},{startDate:evt}));};var handleEndDateChange=function handleEndDateChange(evt){setDateEnd(evt);setFormValues(_objectSpread(_objectSpread({},formValues),{},{endDate:evt}));};var handleSubmitForm=function handleSubmitForm(evt){evt.preventDefault();var momentStart=moment(startDate);var momentEnd=moment(endDate);if(momentStart.isSameOrAfter(momentEnd)){return Swal.fire('Oops!','¡La fecha final debe ser mayor a la de inicio!','error');};if(title.trim().length<2){return setTitleValid(false);}if(activeEvent){dispatch(eventStartUpdate(formValues));}else{dispatch(eventStartAddNew(formValues));}setTitleValid(true);closeModal();};return/*#__PURE__*/_jsxs(Modal,{isOpen:modalOpen,onRequestClose:closeModal,style:customStyles,closeTimeoutMS:200,className:\"modal\",overlayClassName:\"modal-fondo\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\" \",activeEvent?'Editar Evento':'Crear Evento',\" \"]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"form\",{className:\"container\",onSubmit:handleSubmitForm,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Fecha y hora inicio\"}),/*#__PURE__*/_jsx(DateTimePicker,{onChange:handleStartDateChange,value:dateStart,className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Fecha y hora fin\"}),/*#__PURE__*/_jsx(DateTimePicker,{onChange:handleEndDateChange,value:dateEnd,minDate:dateStart,className:\"form-control\"})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Titulo y notas\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control \".concat(!titleValid&&'is-invalid'),placeholder:\"T\\xEDtulo del evento\",name:\"title\",autoComplete:\"off\",value:title,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"small\",{id:\"emailHelp\",className:\"form-text text-muted\",children:\"Una descripci\\xF3n corta\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",className:\"form-control\",placeholder:\"Notas\",rows:\"5\",name:\"notes\",value:notes,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"small\",{id:\"emailHelp\",className:\"form-text text-muted\",children:\"Informaci\\xF3n adicional\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn btn-outline-primary btn-block\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"far fa-save\"}),/*#__PURE__*/_jsx(\"span\",{children:\" Guardar\"})]})]})]});};","map":{"version":3,"sources":["C:/Users/José Luis/Desktop/React/09-calendar-app/src/components/calendar/CalendarModal.js"],"names":["React","useEffect","useState","useDispatch","useSelector","moment","Swal","Modal","DateTimePicker","uiCloseModal","eventStartAddNew","eventClearActive","eventStartUpdate","customStyles","content","top","left","right","bottom","marginRight","transform","setAppElement","now","minutes","seconds","add","end","clone","initEvent","title","notes","startDate","toDate","endDate","CalendarModal","state","ui","modalOpen","calendar","activeEvent","dispatch","formValues","setFormValues","handleInputChange","target","name","value","dateStart","setDateStart","dateEnd","setDateEnd","titleValid","setTitleValid","closeModal","handleStartDateChange","evt","handleEndDateChange","handleSubmitForm","preventDefault","momentStart","momentEnd","isSameOrAfter","fire","trim","length"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport moment from 'moment';\r\nimport Swal from 'sweetalert2';\r\n\r\nimport Modal from 'react-modal';\r\nimport DateTimePicker from 'react-datetime-picker';\r\nimport { uiCloseModal } from '../../actions/ui';\r\nimport { eventStartAddNew, eventClearActive, eventStartUpdate } from '../../actions/events';\r\n\r\nconst customStyles = {\r\n    content: {\r\n      top: '50%',\r\n      left: '50%',\r\n      right: 'auto',\r\n      bottom: 'auto',\r\n      marginRight: '-50%',\r\n      transform: 'translate(-50%, -50%)',\r\n    },\r\n};\r\n\r\nModal.setAppElement('#root');\r\n\r\nconst now = moment().minutes(0).seconds(0).add(1, 'hours');\r\nconst end = moment(now).clone().add(1, 'hours');\r\n\r\nconst initEvent = {\r\n    title: '',\r\n    notes: '',\r\n    startDate: now.toDate(),\r\n    endDate: end.toDate()\r\n}\r\n\r\nexport const CalendarModal = () => {\r\n\r\n    const { modalOpen } = useSelector((state) => state.ui);\r\n    const { activeEvent } = useSelector((state) => state.calendar);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const [formValues, setFormValues] = useState(initEvent);\r\n\r\n    const { notes, title, startDate, endDate } = formValues;\r\n\r\n    useEffect(() => {\r\n\r\n        if (activeEvent) {\r\n            setFormValues(activeEvent);\r\n        }\r\n        else {\r\n            setFormValues(initEvent);\r\n        };\r\n\r\n    }, [activeEvent, setFormValues]);\r\n\r\n    const handleInputChange = ({ target }) => {\r\n        setFormValues({\r\n            ...formValues,\r\n            [target.name]: target.value\r\n        });\r\n    };\r\n\r\n    const [dateStart, setDateStart] = useState( now.toDate() );\r\n    const [dateEnd, setDateEnd] = useState(end.toDate());\r\n    const [titleValid, setTitleValid] = useState(true);\r\n\r\n    const closeModal = () => {\r\n        dispatch( uiCloseModal() );\r\n        dispatch( eventClearActive() );\r\n        setFormValues(initEvent);\r\n    }\r\n\r\n    const handleStartDateChange = (evt) => {\r\n        setDateStart(evt);\r\n        setFormValues({\r\n            ...formValues,\r\n            startDate: evt\r\n        });\r\n    }\r\n\r\n    const handleEndDateChange = (evt) => {\r\n        setDateEnd(evt);\r\n        setFormValues({\r\n            ...formValues,\r\n            endDate: evt\r\n        });\r\n    }\r\n\r\n    const handleSubmitForm = (evt) => {\r\n\r\n        evt.preventDefault();\r\n        const momentStart = moment(startDate);\r\n        const momentEnd = moment(endDate);\r\n\r\n        if ( momentStart.isSameOrAfter(momentEnd) ) {\r\n            return Swal.fire('Oops!', '¡La fecha final debe ser mayor a la de inicio!', 'error');\r\n        };\r\n\r\n        if (title.trim().length < 2) {\r\n            return setTitleValid(false);\r\n        }\r\n\r\n        if (activeEvent) {\r\n            dispatch(eventStartUpdate(formValues));\r\n        }\r\n        else {\r\n\r\n            dispatch(eventStartAddNew(formValues));\r\n\r\n        }\r\n\r\n        setTitleValid(true);\r\n        closeModal();\r\n\r\n    };\r\n\r\n    return (\r\n        <Modal\r\n            isOpen={ modalOpen }\r\n            onRequestClose={closeModal}\r\n            style={customStyles}\r\n            closeTimeoutMS={200}\r\n            className=\"modal\"\r\n            overlayClassName=\"modal-fondo\"\r\n        >\r\n            <h1> { (activeEvent) ? 'Editar Evento' : 'Crear Evento' } </h1>\r\n            <hr />\r\n            <form className=\"container\" onSubmit={ handleSubmitForm }>\r\n\r\n                <div className=\"form-group\">\r\n                    <label>Fecha y hora inicio</label>\r\n                    <DateTimePicker\r\n                        onChange={handleStartDateChange}\r\n                        value={dateStart}\r\n                        className=\"form-control\"\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label>Fecha y hora fin</label>\r\n                    <DateTimePicker\r\n                        onChange={handleEndDateChange}\r\n                        value={dateEnd}\r\n                        minDate={ dateStart }\r\n                        className=\"form-control\"\r\n                    />\r\n                </div>\r\n\r\n                <hr />\r\n\r\n                <div className=\"form-group\">\r\n                    <label>Titulo y notas</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        className={`form-control ${ !titleValid  && 'is-invalid' }`}\r\n                        placeholder=\"Título del evento\"\r\n                        name=\"title\"\r\n                        autoComplete=\"off\"\r\n                        value={ title }\r\n                        onChange={ handleInputChange }\r\n                    />\r\n                    <small id=\"emailHelp\" className=\"form-text text-muted\">Una descripción corta</small>\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <textarea\r\n                        type=\"text\"\r\n                        className=\"form-control\"\r\n                        placeholder=\"Notas\"\r\n                        rows=\"5\"\r\n                        name=\"notes\"\r\n                        value={ notes }\r\n                        onChange={ handleInputChange }\r\n                    ></textarea>\r\n                    <small id=\"emailHelp\" className=\"form-text text-muted\">Información adicional</small>\r\n                </div>\r\n\r\n                <button\r\n                    type=\"submit\"\r\n                    className=\"btn btn-outline-primary btn-block\"\r\n                >\r\n                    <i className=\"far fa-save\"></i>\r\n                    <span> Guardar</span>\r\n                </button>\r\n\r\n            </form>\r\n\r\n        </Modal>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}